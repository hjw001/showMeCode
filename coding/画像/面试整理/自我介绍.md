项目立项时所处背景
项目立项时业务的困境
项目实施所有的技术方案
项目上线后带来的价值

1、面试官你好，我叫何佳伟，目前在十方荣海科技公司数据中台部分任职大数据开发工程师，公司主要是做在线教育方面的业务
2、平时的工作主要是负责公司离线数据仓库的搭建、以及处理一些实时任务需求、以及处理产品的需求

离线数仓项目：
3、首先介绍下我们公司的离线数仓项目吧，这个是一直都在迭代的项目：
    3.1、当时主要是因为公司业务快速的发展，数据量也是爆发式增长，原本支持业务的数据需求是使用presto + metabase （开源报表），随着数据量的增长以及运营人员的增加，每个运营查询一次做一次计算，该方案尤其是做复杂逻辑时 查询效率非常慢，经常需要 几分钟才能查询。为了解决这个问题我们考虑将不需要即时查询的数据（比如投放的数据） 通过离线数仓的方案提供数据支持。
    3.2.1、经过讨论 我们采用的技术方案是：通过购买腾讯云EMR 集群，使用 SQOOP进行数据采集到 HIVE，然后通过 HIVE 使用TEZ引擎进行计算，然后采用 azzkaban将任务定时计算，最终算好的数据存在clickhouse，然后建模的方案采用的 Kimball维度建模，数据分层是参考的阿里的数据分层。
    3.2.2、我们使用SQOOP进行采集时候，会先去判断该表是维度表还是实时表，如果是维度表则全量采集，如果是事实表则根据update_time拉取当天的数据，然后存储在ods
    3.2.3、然后通过ods的数据构建了 CRM（数据公共层），维度表放在DIM，实时表放在 DWD
    3.2.4、针对缓慢变化维：我们采取的是更新策略，维度表使用全量覆盖，事实表则先判断该实时是不变化还是变化的数据，如果是不变化的数据则直接插入新分区即可，如果是变化的话则使用 历史数据 与 当日数据 进行 full join 的操作来达到 更新的策略
    3.2.4、维度建模的方式：我们主要是根据业务部门划分了 财务主题与运营主题
            面向财务的主要是 做了订单的交易订单、退款订单、销售业绩、以及财务核算所需要的 分摊收入与预收账款等数据。
            面向运营的主要是 处理了整个的业务流程：我们划分了课程、用户、直播间、代理商、课程内容等维度。然后划分了交易、到播、加好友、销售接单等事物型的事实 这些都存在了dwd层。
    3.2.5、然后基于业务流程，做了累积性快照事实表，比如基于支付做的扩展表涵盖了整个生命周期（从支付到转化：中间的业务流程 分配训练营、添加好友、添加群、到播等）这些都存在 dws
    3.2.6、然后ads主要是基于 dws指标的计算，最后将ads的数据输出到clickhouse，由后端去集成到公司的CRM后台
4、整个数仓主要解决了运营能够快速查询数据、指标口径的统一与重复口径的开发，提高了数据准确率以及开发效率

实时项目：
5、然后再介绍下我们公司的实时数仓
    5.1、由于业务业务希望能够实时的看到转化效果，以及销售能够实时跟单未转化的用户，而现有离线数据仓库架构无法提供实时数据，因此需要搭建实时数据仓库。
    5.2、咨询了腾讯云解决方案：FLINK + CLICKHOUSE + Ocenus
    5.3、通过FLINK CDC 读取MYSQL 的数据源来构建ods
         然后 dwd层是通过ods的数据使用 temproal join的方式补全维度信息 然后sink到clickhouse，这一层主要是做了订单明细、用户到播放、用户添加好友等汇总表
         然后每5分钟通过azzkaban 进行调度，将订单、到播、添加好友等累积型的事实按照最细粒度进行汇总 补全业务宽表
         最后基于dws 的表进行指标产出